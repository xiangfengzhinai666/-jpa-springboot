<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">

<head th:replace="_fragments :: head(~{::title})">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>详情页</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/semantic-ui@2.5.0/dist/semantic.min.css">
    <link rel="stylesheet" href="../static/css/typo.css">
    <link rel="stylesheet" href="../static/css/animate.css">
    <!-- 这个动画插件的官网好像升级了，本来是animate就可出现动画，现在需要animate.compat才能出现动画，不知道其他两个的作用 -->
    <link rel="stylesheet" href="../static/css/animate.compat.css">
    <link rel="stylesheet" href="../static/css/animate.min.css">
    <link rel="stylesheet" href="../static/lib/prism/prism.css">
    <link rel="stylesheet" href="../static/lib/tocbot/tocbot.css">
    <link rel="stylesheet" href="../static/css/me.css">
</head>

<body>
    <!-- 顶部 -->
    <nav th:replace="_fragments :: menu(1)" class="ui inverted segment">
        <div class="ui container">
            <!-- stackable是移动端自适用 可以自己调整大小 -->
            <div class="ui inverted secondary stackable menu m-padded-tb-mini">
                <h2 class="ui teal header item">Blog</h2>
                <a href="#" class="m-item item m-mobile-hide"><i class="home icon"></i>首页</a>
                <a href="#" class="m-item item m-mobile-hide"><i class="idea icon"></i>分类</a>
                <a href="#" class="m-item item m-mobile-hide"><i class="tags icon"></i>标签</a>
                <a href="#" class="m-item item m-mobile-hide"><i class="clone icon"></i>归档</a>
                <a href="#" class="m-item item m-mobile-hide"><i class="info icon"></i>关于我</a>

                <div class="right item m-mobile-hide">
                    <div class="ui icon inverted transparent input">
                        <input type="text" placeholder="请搜索.....">
                        <i class="search link icon"></i>
                    </div>
                </div>
            </div>
        </div>
        <!-- 加一个图标 -->
        <a href="#" class="ui menu toggle black icon button m-right-top m-mobile-show"><i class="sidebar icon"></i></a>

    </nav>


    <!-- 中间的内容 -->
    <!-- 如果想要使用动画插件的话，就加上animated 后边是动画效果 或者直接animate__hinge如官网所写 -->
    <div id="waypoint" class="m-container-small m-paddedptb-big animate__hinge">
        <div class="ui container">
            <div class="ui top attached segment">

                <!-- 头部 -->
                <div class="ui horizontal link list">
                    <div class="item">
                        <img src="https://unsplash.it/100/100?image=1005" th:src="@{${blog.user.avatar}}" alt="" class="ui avatar image">
                        <div class="content">
                            <a href="#" class="header" th:href="@{/about}" th:text="${blog.user.nickname}">刘大勇</a>
                        </div>
                    </div>
                    <div class="item">
                        <i class="calendar icon"></i><span th:text="${#dates.format(blog.updateTime,'yyyy-MM-dd')}">2023-10-01</span>
                    </div>

                    <div class="item">
                        <i class="eye icon"></i> <span th:text="${blog.views}"> 2233</span>
                    </div>
                </div>
            </div>

            <div class="ui attached segment">
                <!-- 图片区域 -->
                <img src="https://unsplash.it/700/350?image=1005" th:src="@{${blog.firstPicture}}" alt="" class="ui fluid image">
            </div>

            <div class="ui attached padded segment">
                <!-- 内容 -->
                <div class="ui right aligned basic segment">
                    <div class="ui orange basic label" th:text="${blog.flag}">
                        原创
                    </div>
                </div>

                <h2 class="ui center aligned header" th:text="${blog.title}">三国演义</h2>

<!--                中间主要内容部分-->
                <div id="content" class="typo js-toc-content typo-selection m-padded-lr-responsive m-padded-tb-bag" th:utext="${blog.content}">

                    <pre><code class="language-css">p { color: red }</code></pre>

                    <p>话说天下大势，分久必合，合久必分。周末七国分争，并入于秦。及秦灭之后，楚、汉分争，又并入于汉。汉朝自高祖斩白蛇而起义，一统天下，后来光武中兴，传至献帝，遂分为三国。推其致乱之由，殆始于桓、灵二帝。桓帝禁锢善类，崇信宦官。及桓帝崩，灵帝即位，大将军窦武、太傅陈蕃共相辅佐。时有宦官曹节等弄权，窦武、陈蕃谋诛之，机事不密，反为所害，中涓自此愈横。

                        　　建宁二年四月望日，帝御温德殿。方升座，殿角狂风骤起。只见一条大青蛇，从梁上飞将下来，蟠于椅上。帝惊倒，左右急救入宫，百官俱奔避。须臾，蛇不见了。忽然大雷大雨，加以冰雹，落到半夜方止，坏却房屋无数。建宁四年二月，洛阳地震；又海水泛溢，沿海居民，尽被大浪卷入海中。光和元年，雌鸡化雄。六月朔，黑气十余丈，飞入温德殿中。

                        　　秋七月，有虹现于玉堂；五原山岸，尽皆崩裂。种种不祥，非止一端。帝下诏问群臣以灾异之由，议郎蔡邕上疏，以为蜺堕鸡化，乃妇寺干政之所致，言颇切直。帝览奏叹息，因起更衣。曹节在后窃视，悉宣告左右；遂以他事陷邕于罪，放归田里。后张让、赵忠、封谞、段珪、曹节、侯览、蹇硕、程旷、夏恽、郭胜十人朋比为奸，号为“十常侍”。帝尊信张让，呼为“阿父”。朝政日非，以致天下人心思乱，盗贼蜂起。

                        　　时巨鹿郡有兄弟三人，一名张角，一名张宝，一名张梁。那张角本是个不第秀才，因入山采药，遇一老人，碧眼童颜，手执藜杖，唤角至一洞中，以天书三卷授之，曰：“此名《太平要术》，汝得之，当代天宣化，普救世人；若萌异心，必获恶报。”角拜问姓名。老人曰：“吾乃南华老仙也。”言讫，化阵清风而去。角得此书，晓夜攻习，能呼风唤雨，号为“太平道人”。中平元年正月内，疫气流行，张角散施符水，为人治病，自称“大贤良师”。角有徒弟五百余人，云游四方，皆能书符念咒。次后徒众日多，角乃立三十六方，大方万余人，小方六七千，各立渠帅，称为将军；讹言：“苍天已死，黄天当立；岁在甲子，天下大吉。”令人各以白土书“甲子”二字于家中大门上。青、幽、徐、冀、荆、扬、兖、豫八州之人，家家侍奉大贤良师张角名字。角遣其党马元义，暗赍金帛，结交中涓封谞，以为内应。角与二弟商议曰：“至难得者，民心也。今民心已顺，若不乘势取天下，诚为可惜。”遂一面私造黄旗，约期举事；一面使弟子唐周，驰书报封谞。唐周乃径赴省中告变。

                        　　帝召大将军何进调兵擒马元义，斩之；次收封谞等一干人下狱。张角闻知事露，星夜举兵，自称“天公将军”，张宝称“地公将军”，张梁称“人公将军”。申言于众曰：“今汉运将终，大圣人出。汝等皆宜顺天从正，以乐太平。”四方百姓，裹黄巾从张角反者四五十万。

                        　　贼势浩大，官军望风而靡。何进奏帝火速降诏，令各处备御，讨贼立功。一面遣中郎将卢植、皇甫嵩、朱儁，各引精兵、分三路讨之。

                        　　且说张角一军，前犯幽州界分。幽州太守刘焉，乃江夏竟陵人氏，汉鲁恭王之后也。当时闻得贼兵将至，召校尉邹靖计议。靖曰：“贼兵众，我兵寡，明公宜作速招军应敌。”刘焉然其说，随即出榜招募义兵。

                        　　榜文行到涿县，引出涿县中一个英雄。那人不甚好读书；性宽和，寡言语，喜怒不形于色；素有大志，专好结交天下豪杰；生得身长七尺五寸，两耳垂肩，双手过膝，目能自顾其耳，面如冠玉，唇若涂脂；中山靖王刘胜之后，汉景帝阁下玄孙，姓刘名备，字玄德。昔刘胜之子刘贞，汉武时封涿鹿亭侯，后坐酎金失侯，因此遗这一枝在涿县。玄德祖刘雄，父刘弘。弘曾举孝廉，亦尝作吏，早丧。玄德幼孤，事母至孝；家贫，贩屦织席为业。家住本县楼桑村。其家之东南，有一大桑树，高五丈余，遥望之，童童如车盖。相者云：“此家必出贵人。”玄德幼时，与乡中小儿戏于树下，曰：“我为天子，当乘此车盖。”叔父刘元起奇其言，曰：“此儿非常人也！”因见玄德家贫，常资给之。年十五岁，母使游学，尝师事郑玄、卢植，与公孙瓒等为友。

                        　　及刘焉发榜招军时，玄德年已二十八岁矣。当日见了榜文，慨然长叹。随后一人厉声言曰：“大丈夫不与国家出力，何故长叹？”玄德回视其人，身长八尺，豹头环眼，燕颔虎须，声若巨雷，势如奔马。玄德见他形貌异常，问其姓名。其人曰：“某姓张名飞，字翼德。世居涿郡，颇有庄田，卖酒屠猪，专好结交天下豪杰。恰才见公看榜而叹，故此相问。”玄德曰：“我本汉室宗亲，姓刘，名备。今闻黄巾倡乱，有志欲破贼安民，恨力不能，故长叹耳。”飞曰：“吾颇有资财，当招募乡勇，与公同举大事，如何。”玄德甚喜，遂与同入村店中饮酒。

                        　　正饮间，见一大汉，推着一辆车子，到店门首歇了，入店坐下，便唤酒保：“快斟酒来吃，我待赶入城去投军。”玄德看其人：身长九尺，髯长二尺；面如重枣，唇若涂脂；丹凤眼，卧蚕眉，相貌堂堂，威风凛凛。玄德就邀他同坐，叩其姓名。其人曰：“吾姓关名羽，字长生，后改云长，河东解良人也。因本处势豪倚势凌人，被吾杀了，逃难江湖，五六年矣。今闻此处招军破贼，特来应募。”玄德遂以己志告之，云长大喜。同到张飞庄上，共议大事。飞曰：“吾庄后有一桃园，花开正盛；明日当于园中祭告天地，我三人结为兄弟，协力同心，然后可图大事。”玄德、云长齐声应曰：“如此甚好。”

                        　　次日，于桃园中，备下乌牛白马祭礼等项，三人焚香再拜而说誓曰：“念刘备、关羽、张飞，虽然异姓，既结为兄弟，则同心协力，救困扶危；上报国家，下安黎庶。不求同年同月同日生，只愿同年同月同日死。皇天后土，实鉴此心，背义忘恩，天人共戮！”誓毕，拜玄德为兄，关羽次之，张飞为弟。祭罢天地，复宰牛设酒，聚乡中勇士，得三百余人，就桃园中痛饮一醉。来日收拾军器，但恨无马匹可乘。正思虑间，人报有两个客人，引一伙伴当，赶一群马，投庄上来。玄德曰：“此天佑我也！”三人出庄迎接。原来二客乃中山大商：一名张世平，一名苏双，每年往北贩马，近因寇发而回。玄德请二人到庄，置酒管待，诉说欲讨贼安民之意。二客大喜，愿将良马五十匹相送；又赠金银五百两，镔铁一千斤，以资器用。
                    </p>
                </div>

                <!-- 标签 -->
                <div class="m-padded-lr-responsive">
                    <div class="ui basic teal left pointing label" th:each="tag : ${blog.tags}" th:text="${tag.name}">方法论</div>
                </div>

                <div th:if="${blog.appreciation}">
                    <!-- 赞赏 -->
                    <div class="ui center aligned basic  segment">
                        <button id="payButton" class="ui orange basic circular button">赞赏</button>
                    </div>

                    <div class="ui payQ flowing popup transition hidden">
                        <div class="ui orange basic label">
                            <div class="ui images" style="font-size:inherit !important;">
                                <div class="image">
                                    <img src="../static/image/二维.jpg" th:src="@{/image/二维.jpg}" alt="" class="ui rounded bordered image"
                                         style="width:120px">
                                    <div>支付宝</div>
                                </div>

                                <div class="image">
                                    <img src="../static/image/二维.jpg" alt="" th:src="@{/image/二维.jpg}" class="ui rounded bordered image"
                                         style="width:120px">
                                    <div>微信</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>



            </div>

            <div class="ui attached positive message" th:if="${blog.shareStatement}">
                <!-- 博客信息 -->
                <div class="ui middle grid">
                    <div class="eleven wide column">
                        <ui class="list">
                            <li>作者：<span th:text="${blog.user.nickname}">刘大勇</span><a href="#" th:href="@{/about}" target="_blank">(联系作者)</a></li>
                            <li>发表时间：<span th:text="${#dates.format(blog.updateTime,'yyyy-MM-dd HH:mm')}">2023-10-1</span></li>
                            <li>版权声明</li>
                            <li>公众号转载：请在文末添加作者公众号二维码</li>
                        </ui>
                    </div>

<!--                    写到这里了，该往下改内容格式了-->
                    <div class="five wide column">
                        <img src="../static/image/二维.jpg" th:src="@{/image/二维.jpg}" alt="" class="ui right floated rounded bordered image"
                            style="width:110px">
                    </div>
                </div>
            </div>

            <div  class="ui buttom attached segment">
                <!-- 留言区域 -->
                <div id="comment-container"  class="ui teal segment" th:if="${blog.commentabled}">
                    <div th:fragment="commentList">
                        <div class="ui minimal comments" style="max-width: 100%;">
                            <h3 class="ui dividing header">评论</h3>
                            <div class="comment" th:each="comment : ${comments}">
                                <a class="avatar">
<!--                                    原来是这里写错了@{@{comment.avatar}} 我发现了每次出错都是前端出现问题-->
                                    <img src="https://unsplash.it/100/100?image=1005" th:src="@{${comment.avatar}}">
<!--                                    <img src="https://unsplash.it/100/100?image=1005" th:src="${session.user} != null ? @{${comment.avatar2}} : @{${comment.avatar}}">-->
                                </a>
                                <div class="content">
                                    <a class="author" >
                                        <span th:text="${comment.nickname}">香风智乃</span>

                                        <div class="ui mini basic teal left pointing label m-padded-mini" th:if="${comment.adminComment}">master</div>
                                    </a>
                                    <div class="metadata">
                                        <span class="date" th:text="${#dates.format(comment.createTime,'yyyy-MM-dd HH:mm')}">今天下午 5:42</span>
                                    </div>
                                    <div class="text" th:text="${comment.content}">太赞了！ </div>
                                    <div class="actions">
                                        <a class="reply" data-commentid="1" data-commentnickname="香风智乃" th:attr="data-commentid=${comment.id},data-commentnickname=${comment.nickname}" onclick="reply(this)">回复</a>
                                    </div>
                                </div>

<!--                                内嵌的一层-->
                                <div class="comments" th:if="${#arrays.length(comment.replyComments)} > 0">

                                    <div class="comment" th:each="reply : ${comment.replyComments}">
                                        <a class="avatar">
                                            <!--                                    原来是这里写错了@{@{comment.avatar}} 我发现了每次出错都是前端出现问题-->
                                            <img src="https://unsplash.it/100/100?image=1005" th:src="@{${reply.avatar}}">
                                        </a>
                                        <div class="content">
                                            <a class="author" >
                                                <span th:text="${reply.nickname}">和泉纱雾</span>
<!--                                                判断adminComment是否为false，为false就说明不显示-->
                                                <div class="ui mini basic teal left pointing label m-padded-mini" th:if="${reply.adminComment}">master</div>
                                                &nbsp;<span th:text="|@ ${reply.parentComment.nickname}|" class="m-teal">@ 香风智乃</span>
                                            </a>
                                            <div class="metadata">
                                                <span class="date" th:text="${#dates.format(reply.createTime,'yyyy-MM-dd HH:mm')}">今天下午 5:42</span>
                                            </div>
                                            <div class="text" th:text="${reply.content}">太赞了！ </div>
                                            <div class="actions">
                                                <a class="reply" data-commentid="1" data-commentnickname="香风智乃" th:attr="data-commentid=${reply.id},data-commentnickname=${reply.nickname}" onclick="reply(this)">回复</a>
                                            </div>
                                        </div>

                                    </div>
                                </div>

                            </div>
<!--/*-->
                            <div class="comment">
                                <a class="avatar">
                                    <img src="https://unsplash.it/100/100?image=1005">
                                </a>
                                <div class="content">
                                    <a class="author">和泉纱雾</a>
                                    <div class="metadata">
                                        <span class="date">昨天上午12:30</span>
                                    </div>
                                    <div class="text">
                                        <p>謝謝!</p>
                                    </div>
                                    <div class="actions">
                                        <a class="reply">回复</a>
                                    </div>
                                </div>
                                <div class="comments">
                                    <div class="comment">
                                        <a class="avatar">
                                            <img src="https://unsplash.it/100/100?image=1005">
                                        </a>
                                        <div class="content">
                                            <a class="author">ASUKA</a>
                                            <div class="metadata">
                                                <span class="date">刚刚</span>
                                            </div>
                                            <div class="text">和我一起逛卢浮宫吧 </div>
                                            <div class="actions">
                                                <a class="reply">回复</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="comment">
                                <a class="avatar">
                                    <img src="https://unsplash.it/100/100?image=1005">
                                </a>
                                <div class="content">
                                    <a class="author">友利奈绪</a>
                                    <div class="metadata">
                                        <span class="date">5 天以前</span>
                                    </div>
                                    <div class="text">富哥，v50 </div>
                                    <div class="actions">
                                        <a class="reply">回复</a>
                                    </div>
                                </div>
                            </div>
<!--*/-->
                            <!-- <form class="ui reply form">
                                <div class="field">
                                    <textarea></textarea>
                                </div>
                                <div class="ui blue labeled submit icon button">
                                    <i class="icon edit"></i> 回复
                                </div>
                            </form> -->
                        </div>

                    </div>
                </div>

                <form id="comment-form" class="ui form">
                    <input type="hidden" name="blog.id" th:value="${blog.id}">
                    <input type="hidden" name="parentComment.id" value="-1">
                    <div class="field">
                        <textarea name="content" id="" cols="30" rows="10" placeholder="请输入评论信息....."></textarea>
                    </div>

                    <div class="fileds">
                        <div class="filed m-mobile-wide m-margin-bottom-mini">
                            <div class="ui left icon input">
                                <i class="user icon"></i>
                                <input type="text" name="nickname" placeholder="姓名" th:value="${session.user}!=null ? ${session.user.nickname}">
                            </div>
                        </div>

                        <div class="filed  m-mobile-wide m-margin-bottom-mini">
                            <div class="ui left icon input">
                                <i class="mail icon"></i>
                                <input type="text" name="email" placeholder="邮箱" th:value="${session.user}!=null ? ${session.user.email}">
                            </div>
                        </div>

                        <div class="filed  m-mobile-wide m-margin-bottom-mini">
                            <button id="commentPost-btn" type="button" class="ui teal button"><i class="edit icon"></i>发布</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>


    <!-- 右下角悬浮窗口 -->
    <div id="toolbar" class="m-fixed m-right-bottom m-padded-big" style="display:none">
        <div class="ui vertical icon buttons ">
            <button type="button" class="ui toc teal button">目录</button>
            <a href="#comment-container" class="ui teal button">留言</a>
            <button class="ui wechat teal button"><i class="weixin icon"></i></button>
            <div id="toTop-button" class="ui icon button"><i class="chevron up icon"></i></div>
        </div>
    </div>

    <!-- 点击目录出现的内容 -->
    <div class="ui toc-container flowing popup transition hidden" style="width:250px !important;">
        <!-- 生成的目录 -->
        <ol class="js-toc">

        </ol>
    </div>


    <div id="qrcode" class="ui wechat-qr flowing popup transition hidden " style="width:130px !important;">
        <!-- 有了动态生成二维码的工具，这里就不需要静态指定了 -->
        <!-- <img src="./static/image/二维.jpg" alt="" class="ui rounded image" style="width:120px"> -->
    </div>


    <!-- 尾部 -->
    <footer th:replace="_fragments :: footer" class="ui inverted vertical segment m-padded-tb-massive">
        <div class="ui center aligned container">
            <div class="ui inverted divided stackable grid">


                <div class="three wide column">
                    <div class="ui inverted link list">
                        <div class="item">
                            <img src="../static/image/二维.jpg" class="ui rounded image" style="width:120px">
                        </div>
                    </div>
                </div>

                <div class="three wide column">
                    <h4 class="ui inverted header">最新博客</h4>
                    <div class="ui inverted link list">
                        <a href="#" class="item">用户故事（user Story）</a>
                        <a href="#" class="item">角色简介(anime )</a>
                        <a href="#" class="item">行走路线（okokoko）</a>
                    </div>
                </div>
                <div class="three wide column">
                    <h4 class="ui inverted header">最新博客</h4>
                    <div class="ui inverted link list">
                        <a href="#" class="item">邮箱：xfzn2002@163.com</a>
                        <a href="#" class="item">QQ:2949705042（user Story）</a>

                    </div>
                </div>
                <div class="seven wide column">
                    <h4 class="ui inverted header">最新博客</h4>
                    <p>这是我的个人博客，专门分享一些二次元的东西</p>
                </div>
                <!-- 画出一条横线 -->
                <!-- 这一段的格式可能有点不对 画出的横线太短了 -->
                <div class="ui inverted section divider "></div>
                <p class=".m-text-thin .m-text-spaced .m-text-lined">Copyright @ 2016-2017 Lirenmi Designed by Lirenmi
                </p>
            </div>
    </footer>

    <!--/*/<th:block th:replace="_fragments :: script">/*/-->
    <!-- jquery一定要在其他的引用的前面 -->
        <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.5.0/dist/semantic.min.js"></script>
        <script src="../static/lib/prism/prism.js"></script> <!--代码高亮显示的js文件-->
        <script src="../static/lib/tocbot/tocbot.min.js"></script>
        <script src="../static/lib/qrcode/qrcode.min.js"></script>
        <!-- 平滑滚动的插件 -->
        <script src="https://cdn.jsdelivr.net/npm/jquery.scrollto@2.1.3/jquery.scrollTo.min.js"></script>
        <script src="../static/lib/waypoint/jquery.waypoints.min.js"></script>
    <!--/*/</th:block>/*/-->


<!--    在这个标签里面加上inline下面的/**/""才会生效-->
    <script th:inline="javascript">
        $('.menu.toggle').click(function () {
            $('.m-item').toggleClass('m-mobile-hide');
        });

        // 不会写的话，直接在文档里面寻找
        $('#payButton').popup({
            popup: $('.payQ.popup'),
            on: 'click',
            position: 'bottom center'
        });

        // 初始化一下，这个是工具的初始化
        tocbot.init({
            // Where to render the table of contents.
            tocSelector: '.js-toc',
            // Where to grab the headings to build the table of contents.
            contentSelector: '.js-toc-content',
            // Which headings to grab inside of the contentSelector element.
            headingSelector: 'h1, h2, h3',
            // For headings inside relative or absolute positioned containers within content.
            hasInnerContainers: true,
        });

        $('.toc.button').popup({
            popup: $('.toc-container.popup'),
            on: 'click',
            position: 'left center'
        });

        // 这个调往左边显示，但是怎么调都是在上边显示
        $(".wechat").popup({
            popup: $('.wechat-qr'),
            position: 'left center'
        });


        // var serurl = "服务器的域名";
        var serurl = /*[[#{blog.serurl}]]*/"127.0.0.1:8081";
        var url = /*[[@{/blog/{id}(id=${blog.id})}]]*/"";
        var qrcode = new QRCode("qrcode", {
            // text: "http://jindo.dev.naver.com/collie",
            text: serurl+url,

            width: 110,
            height: 110,
            colorDark: "#000000",
            colorLight: "#ffffff",
            correctLevel: QRCode.CorrectLevel.H
        });

        $('#toTop-button').click(function () {
            $(window).scrollTo(0, 500);
        })

        var waypoint = new Waypoint({
            element: document.getElementById('waypoint'),
            handler: function (direction) {
                if (direction == 'down') {
                    $("#toolbar").show(100);
                } else {
                    $('#toolbar').hide(500);
                }
                console.log('Scrolled to waypoint!' + direction)
            }
        })

        //评论表单验证  直接复制的源码
        $('.ui.form').form({
            fields: {
                content: {
                    identifier: 'content',
                    rules: [{
                        type: 'empty',
                        prompt: '请输入评论内容'
                    }
                    ]
                },
                nickname: {
                    identifier: 'nickname',
                    rules: [{
                        type: 'empty',
                        prompt: '请输入你的大名'
                    }]
                },
                email: {
                    identifier: 'email',
                    rules: [{
                        type: 'empty',
                        prompt: '请填写正确的邮箱地址'
                    }]
                }
            }
        });


        //把这个博客原本的评论给展示出来
        $(function () {
            $("#comment-container").load(/*[[@{/comments/{id}(id=${blog.id})}]]*/"comments/6")
        });

        //报错了撒，明天再改吧，脑子有点难受
        //这里报错可能就是前面的代码写错了，导致加载不出来一点东西就报错了
        $('#commentPost-btn').click(function () {
            var boo = $('.ui.form').form('validate form');
            if(boo){
                postData();
                console.log('校验成功');
            }else{
                console.log('校验失败');
            }
            // alert(boo)
        });

        function postData(){
            $("#comment-container").load(/*[[@{/comments}]]*/"",{
                "parentComment.id" : $("[name='parentComment.id']").val(),
                "blog.id" : $("[name='blog.id']").val(),
                "nickname": $("[name='nickname']").val(),
                "email"   : $("[name='email']").val(),
                "content" : $("[name='content']").val()
            },function (responseTxt, statusTxt, xhr) {
                $(window).scrollTo($('#comment-container'),500);  //这个是发布成功之后跳到相应的评论模块 如果是正序排列就不需要这一行了
                clearContent();
            });
        }

        //清除输入框的方法
        function clearContent() {
            $("[name='content']").val('');
            $("[name='parentComment.id']").val(-1);
            $("[name='content']").attr("placeholder","请输入评论信息...");
        }

        function reply(obj) {

            var commentId = $(obj).data('commentid');
            var commentNickname = $(obj).data('commentnickname');
            $("[name='content']").attr("placeholder","@"+commentNickname).focus();
            $("[name='parentComment.id']").val(commentId);
            $(window).scrollTo($('#form'),500);
        }

    </script>



</body>

</html>
